// Generated by CoffeeScript 1.3.3
(function() {

  $.fn.snappish = function(opts) {
    var $main, $slides, $wrapper, counter, inTransition, scrollAnimate, scrollDirection, scrollDistance, scrollLogic, settings, slidesLength;
    settings = $.extend({}, $.fn.snappish.defaults, opts);
    $wrapper = $(this);
    $main = $(settings.mainSelector);
    $slides = $(settings.slidesSelector);
    slidesLength = $slides.length;
    counter = 1;
    scrollDirection = null;
    scrollDistance = 100 / slidesLength;
    inTransition = false;
    $wrapper.css({
      width: '100%',
      height: '100%',
      float: 'left',
      zIndex: 10,
      overflow: 'hidden'
    });
    $main.css({
      width: '100%',
      height: "" + (slidesLength * 100) + "%",
      zIndex: 9,
      'transition': "all " + settings.transitionDuration + "ms ease"
    });
    $slides.css({
      width: '100%',
      height: "" + scrollDistance + "%",
      'transform': 'translateZ(0)'
    });
    scrollAnimate = function(distance) {
      inTransition = true;
      $main.css('transform', "translate3d(0," + distance + "%,0)");
      return setTimeout(function() {
        return inTransition = false;
      }, settings.transitionDuration + settings.transitionWaitAfter);
    };
    scrollLogic = function() {
      if (scrollDirection === 'down' && counter < slidesLength) {
        scrollAnimate(counter * -scrollDistance);
        return counter++;
      } else if (scrollDirection === 'up' && counter > 1) {
        scrollAnimate((counter - 2) * -scrollDistance);
        return counter--;
      } else {
        return inTransition = false;
      }
    };
    if (settings.mousewheelEnabled) {
      $wrapper.on('mousewheel', function(e, delta, deltaX, deltaY) {
        if (inTransition) {
          return;
        }
        if (deltaY < 0) {
          scrollDirection = 'down';
        } else if (deltaY > 0) {
          scrollDirection = 'up';
        }
        return scrollLogic();
      });
    }
    if (settings.swipeEnabled) {
      $.event.special.swipe.settings.threshold = settings.swipeThreshold;
      $wrapper.on('swipeup', function(e) {
        scrollDirection = 'down';
        return scrollLogic();
      });
      return $wrapper.on('swipedown', function(e) {
        scrollDirection = 'up';
        return scrollLogic();
      });
    }
  };

  $.fn.snappish.defaults = {
    mainSelector: '.snappish-main',
    slidesSelector: '.snappish-main > *',
    transitionDuration: 1000,
    transitionWaitAfter: 300,
    mousewheelEnabled: true,
    swipeEnabled: true,
    swipeThreshold: 0.1
  };

}).call(this);
